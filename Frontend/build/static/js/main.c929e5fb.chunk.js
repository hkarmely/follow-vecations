(this.webpackJsonpnorthwind=this.webpackJsonpnorthwind||[]).push([[0],{335:function(e,t,a){},336:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},344:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},366:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},386:function(e,t,a){},489:function(e,t,a){},494:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(88),o=a.n(i),s=(a(335),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,599)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))}),l=a(20),u=a(19),d=a(29),j=a(30),b=a(74),p=a(27),h=a(100),v=Object(u.a)((function e(){if(Object(l.a)(this,e),this.token=null,this.user=null,this.token=localStorage.getItem("token"),this.token){var t=Object(h.a)(this.token);this.user=t.user}}));function O(e){return{type:n.Register,payload:e}}function x(e){return{type:n.Login,payload:e}}!function(e){e.Register="Register",e.Login="Login",e.Logout="Logout"}(n||(n={}));var m,f=Object(u.a)((function e(){Object(l.a)(this,e),this.vacations=[]}));function g(e){return{type:m.FetchVacations,payload:e}}function w(e){return{type:m.UpdatePartialVacation,payload:e}}function y(e){return{type:m.DeleteVacation,payload:e}}!function(e){e.FetchVacations="FetchVacations",e.AddVacation="AddVacation",e.UpdateVacation="UpdateVacation",e.UpdatePartialVacation="UpdatePartialVacation",e.DeleteVacation="DeleteVacation",e.emptyVacationsOnLogout="emptyVacationsOnLogout"}(m||(m={}));var k,V=a(175),D=Object(u.a)((function e(){Object(l.a)(this,e),this.followedVacations=[]}));function S(e){return{type:k.FetchFollowedVacations,payload:e}}!function(e){e.FetchFollowedVacations="FetchFollowedVacations",e.AddFollowedVacation="AddFollowedVacation",e.UpdateFollowedVacation="UpdateFollowedVacation",e.UpdatePartialFollowedVacation="UpdatePartialFollowedVacation",e.DeleteFollowedVacation="DeleteFollowedVacation"}(k||(k={}));var F=Object(b.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case m.FetchVacations:a.vacations=t.payload;break;case m.AddVacation:a.vacations.push(t.payload);break;case m.UpdateVacation:var n=a.vacations.findIndex((function(e){return e.vacationId===t.payload.vacationId}));a.vacations[n]=t.payload;break;case m.UpdatePartialVacation:var c=a.vacations.findIndex((function(e){return e.vacationId===t.payload.vacationId}));a.vacations[c]=t.payload;break;case m.DeleteVacation:var r=a.vacations.findIndex((function(e){return e.vacationId===t.payload}));a.vacations.splice(r,1);break;case m.emptyVacationsOnLogout:a.vacations=[]}return a}),Object(V.composeWithDevTools)(Object(b.applyMiddleware)())),I=Object(b.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case n.Register:case n.Login:a.token=t.payload;var c=Object(h.a)(a.token);a.user=c.user,localStorage.setItem("token",a.token);break;case n.Logout:a.token=null,a.user=null,localStorage.removeItem("token")}return a}),Object(V.composeWithDevTools)(Object(b.applyMiddleware)())),M=Object(b.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new D,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case k.FetchFollowedVacations:a.followedVacations=t.payload;break;case k.AddFollowedVacation:var n=t.payload;void 0===a.followedVacations.find((function(e){return e.userId===n.id}))&&a.followedVacations.push(t.payload);break;case k.UpdateFollowedVacation:var c=a.followedVacations.findIndex((function(e){return e.userId===t.payload.id}));a.followedVacations[c]=t.payload;break;case k.UpdatePartialFollowedVacation:var r=a.followedVacations.findIndex((function(e){return e.userId===t.payload.id}));a.followedVacations[r]=t.payload;break;case k.DeleteFollowedVacation:var i=a.followedVacations.findIndex((function(e){return e.userId===t.payload}));i>=0&&a.followedVacations.splice(i,1)}return a}),Object(V.composeWithDevTools)(Object(b.applyMiddleware)())),C=(a(336),a(1)),L=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).unsubscribeMe=void 0,e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeMe=F.subscribe((function(){var t=F.getState().vacations.length;e.setState({count:t})}))}},{key:"render",value:function(){var e,t;return Object(C.jsx)("div",{className:"TotalVacations",children:(null===(e=this.state)||void 0===e?void 0:e.count)&&Object(C.jsxs)("span",{children:["Total Vacations: ",null===(t=this.state)||void 0===t?void 0:t.count]})})}},{key:"componentWillUnmount",value:function(){this.unsubscribeMe()}}]),a}(c.Component),U=L;a(338);var N=function(){return Object(C.jsxs)("div",{className:"Footer",children:[Object(C.jsx)(U,{}),Object(C.jsx)("p",{children:"All Rights Reserved \xa9"})]})},A=(a(339),a.p+"static/media/logo.064058c8.jpg"),q=a(579),P=a(33),Y=(a(340),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).unsubscribeMe=void 0,e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({user:I.getState().user}),this.unsubscribeMe=I.subscribe((function(){var t=I.getState().user;e.setState({user:t})}))}},{key:"render",value:function(){var e,t;return Object(C.jsxs)("div",{className:"AuthMenu",children:[!(null!==(e=this.state)&&void 0!==e&&e.user)&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{children:"Hello Guest"}),Object(C.jsx)("span",{children:" | "}),Object(C.jsx)(P.b,{to:"/login",children:Object(C.jsx)(q.a,{variant:"contained",size:"medium",disableElevation:!0,children:"Login"})}),Object(C.jsx)("span",{children:" | "}),Object(C.jsx)(P.b,{to:"/register",children:Object(C.jsx)(q.a,{variant:"contained",size:"medium",disableElevation:!0,children:"Register"})})]}),(null===(t=this.state)||void 0===t?void 0:t.user)&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("span",{children:["Hello ",this.state.user.firstName+" "+this.state.user.lastName]}),Object(C.jsx)("span",{children:" | "}),Object(C.jsx)(P.b,{to:"/logout",children:Object(C.jsx)(q.a,{variant:"contained",size:"medium",disableElevation:!0,children:"Logout"})})]})]})}},{key:"componentWillUnmount",value:function(){this.unsubscribeMe()}}]),a}(c.Component)),T=Y;var E=function(){return Object(C.jsxs)("div",{className:"Logo",children:[Object(C.jsx)(P.b,{to:"/home",children:Object(C.jsx)("img",{src:A,className:"imagelogo"})}),Object(C.jsx)("br",{}),Object(C.jsx)(T,{})]})},B=a(22),R=a(17),H=a(10),z=a.n(H),W=(a(344),a(40)),$=a.n(W),G=Object(u.a)((function e(){Object(l.a)(this,e),this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.username=void 0,this.password=void 0,this.role=void 0})),J=Object(u.a)((function e(t){Object(l.a)(this,e),this.urls={products:"",productImages:"",productsDelayed:"",register:"",login:"",socketServer:"",vacationImages:"",followedVacations:"",vacations:""},this.loginPath=void 0,this.urls={followedVacations:t+"vacations/follow/",vacationImages:t+"vacations/images/",vacations:t+"vacations/",products:t+"products/",productImages:t+"products/images/",productsDelayed:t+"products/delayed/",register:t+"auth/register/",login:t+"auth/login/",socketServer:"http://localhost:3001"}})),_=new(function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this,"https://follow-flights-react-practice.herokuapp.com/api/")).loginPath="https://follow-flights-react-practice.herokuapp.com/login",e.urls.socketServer="https://follow-flights-react-practice.herokuapp.com",e}return Object(u.a)(a)}(J)),K=function(){function e(){Object(l.a)(this,e),this.user=null}return Object(u.a)(e,[{key:"register",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(_.urls.register,t);case 2:a=e.sent,n=a.data,I.dispatch(O(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(_.urls.login,t);case 2:a=e.sent,n=a.data,I.dispatch(x(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){I.dispatch({type:n.Logout})}},{key:"isLoggedIn",value:function(){var e=localStorage.getItem("token");return!!e&&1===Object(h.a)(e).user.role}},{key:"isGuest",value:function(){var e=localStorage.getItem("token");return!!e&&-1===Object(h.a)(e).user.role}},{key:"isAdmin",value:function(){var e=localStorage.getItem("token");return!!e&&2===Object(h.a)(e).user.role}},{key:"isTokenAvailable",value:function(){return localStorage.getItem("token")}},{key:"getUser",value:function(){if(null!==I.getState().token)return I.getState().user;var e=new G;return e.role=-1,e}}]),e}(),Q=new K,Z=a(278),X=a.n(Z),ee=a(279),te=a.n(ee),ae=a(166),ne=a.n(ae),ce=a(277),re=a.n(ce),ie=a(276),oe=a.n(ie),se=a(574),le=a(580),ue=a(581),de={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:"80%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,overflow:"scroll"};var je=function(){var e,t=Object(c.useState)(!1),a=Object(R.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)(!1),o=Object(R.a)(i,2),s=o[0],l=o[1],u=function(){return l(!1)};return Object(c.useEffect)((function(){return r(null===Q||void 0===Q?void 0:Q.isAdmin()),Object(B.a)(z.a.mark((function t(){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e=I.subscribe((function(){r(null===Q||void 0===Q?void 0:Q.isAdmin())}))}catch(a){console.error(a)}case 1:case"end":return t.stop()}}),t)})))(),function(){return e()}}),[]),Object(C.jsxs)("div",{className:"Menu",children:[Object(C.jsxs)(q.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,onClick:function(){return l(!0)},children:[Object(C.jsx)(oe.a,{}),"Login Info"]}),Object(C.jsx)("br",{}),n&&Object(C.jsx)(P.b,{to:"/admin-panel",children:Object(C.jsxs)(q.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,children:[Object(C.jsx)(re.a,{}),"Admin Panel"]})}),n&&Object(C.jsxs)(q.a,{variant:"contained",color:"primary",disableElevation:!0,children:[Object(C.jsx)(X.a,{}),Object(C.jsx)(P.b,{to:"/vacations/new",children:"Add Vacation"})]}),n&&Object(C.jsxs)(q.a,{variant:"contained",color:"primary",disableElevation:!0,children:[Object(C.jsx)(te.a,{}),Object(C.jsx)(P.b,{to:"/reports",children:"Reports"})]}),n&&Object(C.jsx)(P.b,{to:"/home",children:Object(C.jsxs)(q.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,children:[Object(C.jsx)(ne.a,{})," Home"]})}),Object(C.jsx)(se.a,{open:s,onClose:u,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(C.jsxs)(le.a,{sx:de,children:[Object(C.jsx)("h1",{children:Object(C.jsx)("b",{children:Object(C.jsx)("u",{children:"Follow Vacations Project "})})}),Object(C.jsx)("h3",{children:"A FullStack Project Implementing:"}),Object(C.jsx)("h4",{children:Object(C.jsx)("b",{children:"Node.js + Express.js + React.js + MySQL + RealTime updates with Socket.io + VictoryChart reports"})}),Object(C.jsx)(ue.a,{primary:"Demo login Credecials:"}),Object(C.jsx)("br",{}),"for admin: ",Object(C.jsx)("br",{}),"username: admin",Object(C.jsx)("br",{}),"password: admin ",Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"for user: ",Object(C.jsx)("br",{}),"username: user ",Object(C.jsx)("br",{}),"password: user ",Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"register: as user (only)",Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"*Adding or updating a vecation by the addmin, or follow/unfollow by users, can be seen in real time by the logedin users.",Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"the application is deployed on HEROKU",Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://follow-flights-react-practice.herokuapp.com/",target:"_blank",rel:"noreferrer",children:"https://follow-flights-react-practice.herokuapp.com"}),Object(C.jsx)(q.a,{onClick:u,autoFocus:!0,children:" Close "})]})})]})};a(363);var be=function(){return Object(C.jsxs)("div",{className:"Header",children:[Object(C.jsx)("h1",{children:" \ud83d\udc96Follow Vacation\ud83d\udc95"}),Object(C.jsx)(E,{}),Object(C.jsx)(je,{})]})},pe=a(24),he=(a(364),a(582)),ve=a(569),Oe=a(585),xe=a(575),me=a(586),fe=a(563),ge=a(565),we=a(566);var ye=function(){return Object(C.jsxs)("div",{className:"ContactUs Box",children:[Object(C.jsxs)(he.a,{variant:"h3",className:"Header",children:[Object(C.jsx)(fe.a,{}),"Contact Us"]}),Object(C.jsxs)("form",{children:[Object(C.jsx)(ve.a,{label:"Name",variant:"outlined",className:"TextBox"}),Object(C.jsx)(ve.a,{label:"Email",variant:"outlined",className:"TextBox",type:"email"}),Object(C.jsx)(ve.a,{label:"Message",variant:"outlined",className:"TextBox"}),Object(C.jsx)(Oe.a,{label:"Send me promotional emails",control:Object(C.jsx)(xe.a,{})}),Object(C.jsxs)(me.a,{variant:"contained",fullWidth:!0,children:[Object(C.jsx)(q.a,{color:"primary",startIcon:Object(C.jsx)(ge.a,{}),children:"Send"}),Object(C.jsx)(q.a,{color:"secondary",startIcon:Object(C.jsx)(we.a,{}),children:"Clear"})]})]})]})};a(366);var ke=function(){return Object(C.jsxs)("div",{className:"About",children:[Object(C.jsx)(ye,{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(P.b,{to:"/home",children:Object(C.jsxs)(q.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,children:[Object(C.jsx)(ne.a,{})," Home"]})})]})};a(367);var Ve=function(){return Object(C.jsxs)("div",{className:"Page404",children:[Object(C.jsx)("h2",{children:"This page doesn't exist"}),Object(C.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/t3otBjVZzT0?autoplay=1",allow:"autoplay",title:"Page not Found"})]})},De=a(84),Se=a(280),Fe=new(function(){function e(){Object(l.a)(this,e),this.notification=new Se.a({duration:4e3,position:{x:"center",y:"top"}})}return Object(u.a)(e,[{key:"success",value:function(e){this.notification.success(e)}},{key:"error",value:function(e){var t=this.getError(e);this.notification.error(t)}},{key:"getError",value:function(e){var t,a;return"string"===typeof e?e:"string"===typeof(null===(t=e.response)||void 0===t?void 0:t.data)?e.response.data:Array.isArray(null===(a=e.response)||void 0===a?void 0:a.data)?e.response.data[0]:"string"===typeof e.message?e.message:"Some error, please try again."}}]),e}());a(368);var Ie=function(){var e=Object(De.a)(),t=e.register,a=e.handleSubmit,n=Object(pe.g)();function c(){return(c=Object(B.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.register(t);case 3:Fe.success("You are registered"),n("/home"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fe.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(C.jsxs)("div",{className:"Register Box",children:[Object(C.jsx)("h2",{children:"Register"}),Object(C.jsxs)("form",{onSubmit:a((function(e){return c.apply(this,arguments)})),children:[Object(C.jsx)("label",{children:"First name: "}),Object(C.jsx)("input",Object(p.a)({type:"text",autoFocus:!0},t("firstName"))),Object(C.jsx)("label",{children:"Last name: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},t("lastName"))),Object(C.jsx)("label",{children:"Username: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},t("username"))),Object(C.jsx)("label",{children:"Password: "}),Object(C.jsx)("input",Object(p.a)({type:"password"},t("password"))),Object(C.jsx)("button",{children:"Register"})]})]})};a(369);var Me=function(){var e=Object(pe.g)(),t=Object(De.a)(),a=t.register,n=t.handleSubmit;function c(){return(c=Object(B.a)(z.a.mark((function t(a){var n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.login(a);case 3:return Fe.success("You are now logged in"),t.next=6,Q.getUser();case 6:n=t.sent,t.t0=n.role,t.next=-1===t.t0?10:2===t.t0?12:14;break;case 10:return window.location.replace(_.loginPath),t.abrupt("break",15);case 12:return window.location.href="/admin-panel",t.abrupt("break",15);case 14:e("/home");case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(0),Fe.error(t.t1);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}return Object(C.jsxs)("div",{className:"Login Box",children:[Object(C.jsx)("h2",{children:"Login"}),Object(C.jsxs)("form",{onSubmit:n((function(e){return c.apply(this,arguments)})),children:[Object(C.jsx)("label",{children:"Username: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},a("username"))),Object(C.jsx)("label",{children:"Password: "}),Object(C.jsx)("input",Object(p.a)({type:"password"},a("password"))),Object(C.jsx)("button",{children:"Login"})]})]})};var Ce=function(){var e=Object(pe.g)();return Object(c.useEffect)((function(){Object(B.a)(z.a.mark((function t(){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.logout();case 3:Q.isTokenAvailable(),e("/home"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Q.isTokenAvailable(),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))(),e("/home")}),[]),null},Le=a(7),Ue=(a(370),a(371),a.p+"static/media/loading.c7d9f081.gif");var Ne=function(){return Object(C.jsx)("div",{className:"Loading",children:Object(C.jsx)("img",{src:Ue})})},Ae=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getAllVacations",value:function(){var e=Object(B.a)(z.a.mark((function e(){var t,a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==F.getState().vacations.length){e.next=9;break}return e.next=3,$.a.get(_.urls.vacations);case 3:return t=e.sent,a=t.data,F.dispatch(g(a)),e.abrupt("return",a);case 9:return n=F.getState().vacations,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=F.getState().vacations,!(n=a.find((function(e){return e.vacationId===t})))){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,$.a.get(_.urls.vacations+t);case 6:return c=e.sent,e.abrupt("return",c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("description",t.description),a.append("destination",t.destination),a.append("fromDate",t.fromDate.toString()),a.append("toDate",t.toDate.toString()),a.append("price",t.price.toString()),a.append("image",t.image.item(0)),e.next=9,$.a.post(_.urls.vacations,a);case 9:return n=e.sent,c=n.data,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePartialVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("description",t.description),a.append("destination",t.destination),a.append("fromDate",t.fromDate.toString()),a.append("toDate",t.toDate.toString()),a.append("price",t.price.toString()),a.append("image",t.image.item(0)),e.next=9,$.a.patch(_.urls.vacations+t.vacationId,a);case 9:return n=e.sent,c=n.data,F.dispatch((r=c,{type:m.UpdateVacation,payload:r})),e.abrupt("return",c);case 13:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.delete(_.urls.vacations+t);case 2:F.dispatch(y(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qe=new Ae,Pe=a(281),Ye=a.n(Pe),Te=a(282),Ee=a.n(Te),Be=a(8),Re=a(567),He=a(587),ze=a(588),We=a(583),$e=a(589),Ge=a(590),Je=a(591),_e=a(204),Ke=a(57),Qe=a.n(Ke),Ze=Object(Be.a)(Re.a)((function(e){var t,a=e.theme;return t={},Object(Le.a)(t,"&.".concat(_e.a.head),{backgroundColor:a.palette.common.black,color:a.palette.common.white}),Object(Le.a)(t,"&.".concat(_e.a.body),{fontSize:20}),t})),Xe=Object(Be.a)(He.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),et=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).unsubscribeMe=void 0,n.query="",n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(B.a)(z.a.mark((function e(){var t,a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q.isAdmin()||(Fe.error("You are not logged in as Admin"),window.location.replace(_.loginPath)),e.prev=2,e.next=5,qe.getAllVacations();case 5:t=e.sent,this.setState({vacations:t}),this.unsubscribeMe=F.subscribe(Object(B.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.getAllVacations();case 2:t=e.sent,a.setState({vacations:t});case 4:case"end":return e.stop()}}),e)})))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Fe.error(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribeMe()}},{key:"render",value:function(){var e,t,a,n=this;return Object(C.jsxs)("div",{className:"AdminPanel",children:[Object(C.jsx)("br",{}),Object(C.jsx)(ve.a,{id:"filled-basic",label:"\u05d7\u05e4\u05e9 \u05d7\u05d5\u05e4\u05e9\u05d4",variant:"standard",onChange:function(e){n.query=e.target.value,n.setState({query:e.target.value})}}),Object(C.jsx)("br",{}),Object(C.jsx)("hr",{}),void 0===(null===(e=this.state)||void 0===e?void 0:e.vacations)&&Object(C.jsx)(Ne,{}),Object(C.jsx)(ze.a,{component:We.a,children:Object(C.jsxs)($e.a,{"aria-label":"customized table",children:[Object(C.jsx)(Ge.a,{children:Object(C.jsxs)(He.a,{children:[Object(C.jsx)(Ze,{align:"center",children:"destination"}),Object(C.jsx)(Ze,{align:"center",children:"Description"}),Object(C.jsx)(Ze,{align:"center",children:"Price"}),Object(C.jsx)(Ze,{align:"center",children:"fromDate"}),Object(C.jsx)(Ze,{align:"center",children:"toDate"}),Object(C.jsx)(Ze,{align:"center",children:"Image"}),Object(C.jsx)(Ze,{align:"center",children:"Followers"}),Object(C.jsx)(Ze,{align:"center",children:"Edit"}),Object(C.jsx)(Ze,{align:"center",children:"Delete"})]})}),Object(C.jsx)(Je.a,{children:null===(t=this.state)||void 0===t||null===(a=t.vacations)||void 0===a?void 0:a.filter((function(e){return""===n.query||e.description.toLowerCase().includes(n.query.toLowerCase())||e.destination.toLowerCase().includes(n.query.toLowerCase())||e.fromDate.toLowerCase().includes(n.query.toLowerCase())||e.toDate.toLowerCase().includes(n.query.toLowerCase())||e.price.toString().includes(n.query)||e.followers.toString().includes(n.query)||e.followers.toString().includes(n.query.toLowerCase())||e.vacationId.toString().includes(n.query)||e.followers.toString().includes(n.query)?e:void 0})).map((function(e){return Object(C.jsxs)(Xe,{children:[Object(C.jsx)(Ze,{align:"center",children:Object(C.jsx)("div",{className:"Destination",children:e.destination})}),Object(C.jsx)(Ze,{align:"center",children:Object(C.jsx)("div",{className:"Description",children:e.description})}),Object(C.jsxs)(Ze,{align:"center",children:[e.price," $"]}),Object(C.jsxs)(Ze,{align:"center",children:[Qe()(e.fromDate).format("DD-MM-YYYY, HH:MM A")," "]}),Object(C.jsxs)(Ze,{align:"center",children:[Qe()(e.toDate).format("DD-MM-YYYY, HH:MM A")," "]}),Object(C.jsxs)(Ze,{align:"center",children:[" ",Object(C.jsx)("img",{src:_.urls.vacationImages+e.imageName,alt:""})]}),Object(C.jsxs)(Ze,{align:"center",children:[e.followers?e.followers:"No followers"," "]}),Object(C.jsx)(Ze,{align:"center",children:Object(C.jsx)(P.b,{to:"/vacations/update/".concat(e.vacationId),children:Object(C.jsx)(Ye.a,{})})}),Object(C.jsx)(Ze,{align:"center",children:Object(C.jsx)("button",{onClick:function(){return qe.deleteVacation(+e.vacationId)},children:Object(C.jsx)(Ee.a,{})})})]},e.vacationId)})).reverse()})]})})]})}}]),a}(c.Component),tt=et;a(372);var at=function(){var e,t,a,n,r,i,o,s=Object(c.useState)(),l=Object(R.a)(s,2),u=l[0],d=l[1],j=Object(pe.g)(),b=Object(De.a)(),h=b.register,v=b.handleSubmit,O=b.formState,x=b.setValue,m=window.location.pathname.lastIndexOf("/"),f=+window.location.pathname.substr(m+1);function g(){return g=Object(B.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.vacationId=f,e.next=4,qe.updatePartialVacation(t);case 4:a=e.sent,Fe.success("Vacation has been updated. id: "+a.vacationId),j("/admin-panel"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Fe.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),g.apply(this,arguments)}return Object(c.useEffect)((function(){Object(B.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getUser();case 3:return 2!==e.sent.role&&window.location.replace(_.loginPath),e.next=7,qe.getOneVacation(f);case 7:return t=e.sent,e.next=10,d(t);case 10:return e.next=12,x("description",t.description);case 12:return e.next=14,x("destination",t.destination);case 14:return e.next=16,x("price",t.price);case 16:return e.next=18,x("fromDate",t.fromDate);case 18:return e.next=20,x("toDate",t.toDate);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))()}),[]),Object(C.jsxs)("div",{className:"UpdateVacation Box",children:[Object(C.jsx)("h2",{children:"Update Vacation"}),Object(C.jsxs)("form",{onSubmit:v((function(e){return g.apply(this,arguments)})),children:[Object(C.jsx)("label",{children:"destination: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},h("destination",{required:{value:!1,message:"Missing destination"},minLength:{value:2,message:"destination must be minimum 2 chars"},maxLength:{value:100,message:"destination can't exceed 100 chars"}}))),Object(C.jsx)("span",{children:null===(e=O.errors.destination)||void 0===e?void 0:e.message}),Object(C.jsx)("label",{children:"description: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},h("description",{required:{value:!1,message:"Missing description"},minLength:{value:2,message:"description must be minimum 2 chars"},maxLength:{value:1e3,message:"description can't exceed 1000 chars"}}))),Object(C.jsx)("span",{children:null===(t=O.errors.description)||void 0===t?void 0:t.message}),Object(C.jsx)("label",{children:"fromDate: "}),Object(C.jsx)("span",{children:Qe()(null===u||void 0===u?void 0:u.fromDate).format("DD-MM-YYYY,HH:MM A")}),Object(C.jsx)("input",Object(p.a)({type:"datetime-local",name:"fromDate"},h("fromDate",{required:{value:!1,message:"Missing start Date"}}))),Object(C.jsx)("span",{children:null===(a=O.errors.fromDate)||void 0===a?void 0:a.message}),Object(C.jsx)("label",{children:"toDate: "}),Object(C.jsx)("span",{children:Qe()(null===u||void 0===u?void 0:u.toDate).format("DD-MM-YYYY,HH:MM A")}),Object(C.jsx)("span",{children:null===(n=O.errors.toDate)||void 0===n?void 0:n.message}),Object(C.jsx)("input",Object(p.a)({type:"datetime-local",name:"toDate"},h("toDate",{required:{value:!1,message:"Missing End Date"}}))),Object(C.jsx)("span",{children:null===(r=O.errors.toDate)||void 0===r?void 0:r.message}),Object(C.jsx)("label",{children:"Price: "}),Object(C.jsx)("input",Object(p.a)(Object(p.a)({type:"number"},h("price",{required:{value:!1,message:"Missing price"},min:{value:0,message:"Price can't be negative"},max:{value:1e5,message:"Price can't exceed $100000"}})),{},{step:"0.01"})),Object(C.jsx)("span",{children:null===(i=O.errors.price)||void 0===i?void 0:i.message}),Object(C.jsx)("label",{children:"Image:"}),Object(C.jsx)("br",{}),Object(C.jsx)("img",{src:_.urls.vacationImages+(null===u||void 0===u?void 0:u.imageName),alt:""}),Object(C.jsx)("input",Object(p.a)({type:"file",accept:"image/*",defaultValue:null===u||void 0===u?void 0:u.imageName},h("image",{required:{value:!1,message:"Missing image"}}))),Object(C.jsx)("span",{children:null===(o=O.errors.image)||void 0===o?void 0:o.message}),Object(C.jsx)("button",{children:"Update"})]})]})};a(373);var nt=function(){var e,t,a,n,r,i,o,s,l=Object(pe.g)();Object(c.useEffect)(Object(B.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getUser();case 3:2!==e.sent.role&&window.location.replace(_.loginPath),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);var u=Object(De.a)(),d=u.register,j=u.handleSubmit,b=u.formState;function h(){return(h=Object(B.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.addVacation(t);case 3:a=e.sent,Fe.success("Vacation has been added. id: "+a.vacationId),l("/admin-panel"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Fe.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(C.jsxs)("div",{className:"AddVacation Box",children:[Object(C.jsx)("h2",{children:"Add Vacation"}),Object(C.jsxs)("form",{onSubmit:j((function(e){return h.apply(this,arguments)})),children:[Object(C.jsx)("label",{children:"description: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},d("description",{required:{value:!1,message:"Missing description"},minLength:{value:2,message:"description must be minimum 2 chars"},maxLength:{value:2e3,message:"description can't exceed 2000 chars"}}))),Object(C.jsx)("span",{children:null===(e=b.errors.description)||void 0===e?void 0:e.message}),Object(C.jsx)("label",{children:"destination: "}),Object(C.jsx)("input",Object(p.a)({type:"text"},d("destination",{required:{value:!1,message:"Missing destination"},minLength:{value:2,message:"destination must be minimum 2 chars"},maxLength:{value:100,message:"destination can't exceed 100 chars"}}))),Object(C.jsx)("span",{children:null===(t=b.errors.destination)||void 0===t?void 0:t.message}),Object(C.jsx)("label",{children:"fromDate: "}),Object(C.jsx)("span",{children:null===(a=b.errors.fromDate)||void 0===a?void 0:a.message}),Object(C.jsx)("input",Object(p.a)({type:"datetime-local"},d("fromDate",{required:{value:!1,message:"Missing Date"},minLength:{value:2,message:"Date must be minimum 2 chars"},maxLength:{value:100,message:"Date can't exceed 100 chars"}}))),Object(C.jsx)("span",{children:null===(n=b.errors.fromDate)||void 0===n?void 0:n.message}),Object(C.jsx)("label",{children:"toDate: "}),Object(C.jsx)("span",{children:null===(r=b.errors.toDate)||void 0===r?void 0:r.message}),Object(C.jsx)("input",Object(p.a)({type:"datetime-local"},d("toDate",{required:{value:!1,message:"Missing Date"},minLength:{value:2,message:"Date must be minimum 2 chars"},maxLength:{value:100,message:"Date can't exceed 100 chars"}}))),Object(C.jsx)("span",{children:null===(i=b.errors.toDate)||void 0===i?void 0:i.message}),Object(C.jsx)("label",{children:"Price: "}),Object(C.jsx)("input",Object(p.a)(Object(p.a)({type:"number"},d("price",{required:{value:!1,message:"Missing price"},min:{value:0,message:"Price can't be negative"},max:{value:1e5,message:"Price can't exceed $100000"}})),{},{step:"0.01"})),Object(C.jsx)("span",{children:null===(o=b.errors.price)||void 0===o?void 0:o.message}),Object(C.jsx)("label",{children:"Image:"}),Object(C.jsx)("input",Object(p.a)({type:"file",accept:"image/*"},d("image",{required:{value:!1,message:"Missing image"}}))),Object(C.jsx)("span",{children:null===(s=b.errors.image)||void 0===s?void 0:s.message}),Object(C.jsx)("button",{children:"Add"})]})]})},ct=(a(374),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(B.a)(z.a.mark((function e(){var t,a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.location.pathname.lastIndexOf("/"),a=+window.location.pathname.substr(t+1),e.next=5,qe.getOneVacation(a);case 5:n=e.sent,this.setState({vacation:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Fe.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n,c,r,i,o,s,l,u,d,j,b,p,h;return Object(C.jsxs)("div",{className:"VacationDetails Box",children:[Object(C.jsx)("h2",{children:"Vacation Details: "}),Object(C.jsx)("h3",{children:null===(e=this.state)||void 0===e||null===(t=e.vacation)||void 0===t?void 0:t.destination}),Object(C.jsxs)("h3",{children:["Price: $",null===(a=this.state)||void 0===a||null===(n=a.vacation)||void 0===n?void 0:n.price," | Followers: ",null===(c=this.state)||void 0===c||null===(r=c.vacation)||void 0===r?void 0:r.followers]}),Object(C.jsx)("img",{src:_.urls.vacationImages+(null===(i=this.state)||void 0===i||null===(o=i.vacation)||void 0===o?void 0:o.imageName)}),Object(C.jsx)("h3",{children:null===(s=this.state)||void 0===s||null===(l=s.vacation)||void 0===l?void 0:l.description}),Object(C.jsx)("h3",{children:null===(u=this.state)||void 0===u||null===(d=u.vacation)||void 0===d?void 0:d.followedByUser}),Object(C.jsxs)("h3",{children:[" ",Object(C.jsx)("label",{children:"From Date:"})]}),Object(C.jsx)("h3",{children:Qe()(null===(j=this.state)||void 0===j||null===(b=j.vacation)||void 0===b?void 0:b.fromDate).format("DD - MM - YYYY")}),Object(C.jsx)("h3",{children:Object(C.jsx)("label",{children:"To Date:"})}),Object(C.jsx)("h3",{children:Qe()(null===(p=this.state)||void 0===p||null===(h=p.vacation)||void 0===h?void 0:h.toDate).format("DD - MM - YYYY")}),Object(C.jsxs)("h2",{children:[" ",Object(C.jsx)(P.b,{to:"/home",children:"Back"})]})]})}}]),a}(c.Component)),rt=ct,it=a(26),ot=(a(375),a(376),a(593)),st=a(597),lt=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getFollowedVacations",value:function(){throw new Error("Method not implemented.")}},{key:"getAllFollowedVacations",value:function(){var e=Object(B.a)(z.a.mark((function e(){var t,a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==M.getState().followedVacations.length){e.next=9;break}return e.next=3,$.a.get(_.urls.followedVacations);case 3:return t=e.sent,a=t.data,M.dispatch(S(a)),e.abrupt("return",a);case 9:return n=M.getState().followedVacations,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserFollowedVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("the userId Send From home"),console.log(t),console.log("The address that function getUserFollowedVacation goes to "),console.log(_.urls.followedVacations+"".concat(t)),e.next=6,$.a.get(_.urls.followedVacations+"".concat(t));case 6:return a=e.sent,n=a.data,console.log("The response from"),console.log(a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFollowedVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t,a){var n,c,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("userId",t.toString()),n.append("vacationId",a.toString()),e.next=5,$.a.post(_.urls.followedVacations,n);case 5:return c=e.sent,r=c.data,M.dispatch((i=r,{type:k.AddFollowedVacation,payload:i})),e.abrupt("return",r);case 9:case"end":return e.stop()}var i}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteFollowedVacation",value:function(){var e=Object(B.a)(z.a.mark((function e(t,a){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.delete(_.urls.followedVacations+"".concat(t,"/").concat(a));case 2:M.dispatch((n=t,{type:k.DeleteFollowedVacation,payload:n}));case 3:case"end":return e.stop()}var n}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),ut=new lt,dt=a(578),jt=a(101),bt=a(594),pt=a(595),ht=a(288),vt=a.n(ht),Ot=a(596),xt=a(584),mt=a(576),ft=a(592),gt=a(568),wt=a(177),yt=a.n(wt),kt=a(559),Vt=a(284),Dt=a.n(Vt),St=a(285),Ft=a.n(St),It=a(286),Mt=a.n(It),Ct=a(287),Lt=a.n(Ct),Ut=a(570),Nt=a(283),At=a.n(Nt),qt=Object(Ut.a)((function(e){return{typography:{},btn:{backgroundColor:"#26a27b",color:"rgba(255,255,255,0.9)",fontWeight:500,"&:hover":{}}}}));function Pt(){var e=qt(),t=function(e){e.preventDefault();var t,n=window.location.href,c=encodeURIComponent(n);switch(e.currentTarget.id){case"facebook":t="https://www.facebook.com/sharer/sharer.php?u=".concat(n),a(t);break;case"twitter":t="https://twitter.com/intent/tweet?url=".concat(c),a(t);break;case"reddit":t="https://www.reddit.com/submit?url=".concat(c),a(t);break;case"copy":navigator.clipboard.writeText(n)}},a=function(e){window.open(e,"_blank")};return Object(C.jsx)("div",{style:{height:"5vh",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(C.jsx)(yt.a,{variant:"popper",popupId:"demo-popup-popper",children:function(a){return Object(C.jsxs)("div",{children:[Object(C.jsx)(q.a,Object(p.a)(Object(p.a)({className:e.btn,color:"inherit"},Object(wt.bindToggle)(a)),{},{children:Object(C.jsx)(At.a,{})})),Object(C.jsx)(gt.a,Object(p.a)(Object(p.a)({},Object(wt.bindPopper)(a)),{},{transition:!0,children:function(e){var a=e.TransitionProps;return Object(C.jsx)(kt.a,Object(p.a)(Object(p.a)({},a),{},{timeout:350,children:Object(C.jsx)(We.a,{children:Object(C.jsxs)(xt.a,{dense:!0,children:[Object(C.jsxs)(mt.a,{button:!0,style:{paddingTop:".75em"},id:"facebook",onClick:t,children:[Object(C.jsx)(ft.a,{children:Object(C.jsx)(Dt.a,{})}),Object(C.jsx)(ue.a,{primary:"Facebook"})]}),Object(C.jsxs)(mt.a,{button:!0,style:{paddingTop:".75em"},id:"twitter",onClick:t,children:[Object(C.jsx)(ft.a,{children:Object(C.jsx)(Ft.a,{})}),Object(C.jsx)(ue.a,{primary:"Twitter"})]}),Object(C.jsxs)(mt.a,{button:!0,style:{paddingTop:".75em"},id:"reddit",onClick:t,children:[Object(C.jsx)(ft.a,{children:Object(C.jsx)(Mt.a,{})}),Object(C.jsx)(ue.a,{primary:"Reddit"})]}),Object(C.jsxs)(mt.a,{button:!0,style:{paddingTop:".75em"},id:"copy",onClick:t,children:[Object(C.jsx)(ft.a,{children:Object(C.jsx)(Lt.a,{})}),Object(C.jsx)(ue.a,{primary:"Copy Link"})]})]})})}))}}))]})}})})}var Yt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:"80%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,overflow:"scroll"};var Tt=function(e){var t,a,n,r,i,o=Object(c.useState)(!1),s=Object(R.a)(o,2),l=s[0],u=s[1],d=Object(c.useState)(e.vacation.followedByUser),j=Object(R.a)(d,2),b=j[0],p=j[1];console.log("followedByUser:  ",b,"props.vacation.followedByUser: ",e.vacation.followedByUser);var h=function(){return u(!0)},v=function(){return u(!1)};function O(){return(O=Object(B.a)(z.a.mark((function t(){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p(!b),t.prev=1,!b){t.next=7;break}return t.next=5,ut.deleteFollowedVacation(e.user.id,e.vacation.vacationId);case 5:t.next=9;break;case 7:return t.next=9,ut.addFollowedVacation(e.user.id,e.vacation.vacationId);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}return Object(C.jsx)("div",{className:"VacationCard",children:Object(C.jsx)(ot.a,{sx:{maxWidth:345},children:Object(C.jsxs)("div",{children:[Object(C.jsx)(bt.a,{action:Object(C.jsx)(pt.a,{"aria-label":"settings",children:Object(C.jsx)(q.a,{onClick:h,children:Object(C.jsx)(vt.a,{})})}),title:null===(t=e.vacation)||void 0===t?void 0:t.destination}),Object(C.jsx)(q.a,{onClick:h,children:Object(C.jsx)(Ot.a,{component:"img",image:_.urls.vacationImages+(null===(a=e.vacation)||void 0===a?void 0:a.imageName),alt:null===(n=e.vacation)||void 0===n?void 0:n.imageName})}),Object(C.jsx)("br",{}),Object(C.jsx)(he.a,{noWrap:!0,children:e.vacation.description}),Object(C.jsx)("br",{}),"$",e.vacation.price,Object(C.jsx)("br",{}),Object(C.jsx)("b",{children:" Followers: "}),Object(C.jsx)(dt.a,{sx:{bgcolor:jt.a[500]},"aria-label":"recipe",children:e.vacation.followers?e.vacation.followers+"\ud83d\ude0d":"\ud83d\ude4b\ud83c\udffc\u200d\u2642\ufe0f"}),Object(C.jsx)(Pt,{}),Object(C.jsx)("br",{}),b?"UnCheck To Unfollow":"Check To Follow"," ",Object(C.jsx)(st.a,{checked:b,onChange:function(){return O.apply(this,arguments)}}),Object(C.jsx)(se.a,{open:l,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(C.jsx)(le.a,{sx:Yt,children:Object(C.jsxs)(he.a,{id:"modal-modal-description",sx:{mt:2},children:[Object(C.jsx)("h2",{children:e.vacation.destination}),Object(C.jsxs)("p",{children:["Price: $",e.vacation.price]}),Object(C.jsxs)("p",{children:["Followers: ",e.vacation.followers]}),Object(C.jsx)("img",{src:_.urls.vacationImages+(null===(r=e.vacation)||void 0===r?void 0:r.imageName),alt:null===(i=e.vacation)||void 0===i?void 0:i.imageName}),Object(C.jsx)("p",{children:e.vacation.description}),Object(C.jsx)("p",{children:e.vacation.followedByUser}),Object(C.jsxs)("p",{children:[" ",Object(C.jsx)("label",{children:"From Date:"}),Qe()(e.vacation.fromDate).format("DD - MM - YYYY")]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("label",{children:"To Date:"}),Qe()(e.vacation.toDate).format("DD - MM - YYYY")]}),Object(C.jsx)(P.b,{to:"/about",children:Object(C.jsx)(q.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,children:"Order Vacation"})}),Object(C.jsx)(q.a,{onClick:v,autoFocus:!0,children:"Close"})]})})})]})})})},Et=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).unsubscribeMe=void 0,e.query="",e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(B.a)(z.a.mark((function e(){var t,a,n,c,r,i,o,s,l=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getUser();case 3:n=e.sent,e.t0=n.role,e.next=-1===e.t0?7:9;break;case 7:return window.location.replace(_.loginPath),e.abrupt("break",26);case 9:return this.setState({user:n}),e.next=12,qe.getAllVacations();case 12:return c=e.sent,this.setState({vacations:c}),e.next=16,ut.getUserFollowedVacation(this.state.user.id);case 16:r=e.sent,this.setState({vacationsFollowedByUser:r}),(i=null===(t=this.state)||void 0===t?void 0:t.vacations.filter((function(e){var t;return null===(t=l.state)||void 0===t?void 0:t.vacationsFollowedByUser.some((function(t){return t.vacationId===e.vacationId}))}))).forEach((function(e){e.followedByUser=!0})),(o=null===(a=this.state)||void 0===a?void 0:a.vacations.filter((function(e){var t;return!(null!==(t=l.state)&&void 0!==t&&t.vacationsFollowedByUser.some((function(t){return t.vacationId===e.vacationId})))}))).forEach((function(e){e.followedByUser=!1})),s=[].concat(Object(it.a)(i),Object(it.a)(o)),this.setState({vacations:s}),this.setState({readyToDisplay:!0}),this.unsubscribeMe=F.subscribe(Object(B.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.getAllVacations();case 2:t=e.sent,l.setState({vacations:t});case 4:case"end":return e.stop()}}),e)}))));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),alert(e.t1.message);case 31:case"end":return e.stop()}}),e,this,[[0,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n,c=this;return Object(C.jsxs)("div",{className:"Home",children:[Object(C.jsx)("br",{}),Object(C.jsx)(ve.a,{id:"filled-basic",label:"\u05d7\u05e4\u05e9 \u05d7\u05d5\u05e4\u05e9\u05d4",variant:"standard",onChange:function(e){c.query=e.target.value,c.setState({query:e.target.value})}}),Object(C.jsx)("br",{}),Object(C.jsx)("hr",{}),void 0===(null===(e=this.state)||void 0===e?void 0:e.vacations)&&Object(C.jsx)(Ne,{}),Object(C.jsx)("div",{className:"cards",children:(null===(t=this.state)||void 0===t?void 0:t.readyToDisplay)&&(null===(a=this.state)||void 0===a||null===(n=a.vacations)||void 0===n?void 0:n.filter((function(e){return""===c.query||e.description.toLowerCase().includes(c.query.toLowerCase())||e.destination.toLowerCase().includes(c.query.toLowerCase())||e.fromDate.toLowerCase().includes(c.query.toLowerCase())||e.toDate.toLowerCase().includes(c.query.toLowerCase())||e.price.toString().includes(c.query)||e.followers.toString().includes(c.query)||e.followers.toString().includes(c.query.toLowerCase())||e.vacationId.toString().includes(c.query)||e.followers.toString().includes(c.query)?e:void 0})).map((function(e){return Object(C.jsx)(Tt,{vacation:e,user:c.state.user},e.vacationId)})))})]})}}]),a}(c.Component),Bt=Et,Rt=(a(386),a(577)),Ht=a(598),zt=a(571);var Wt=function(){var e=Object(c.useState)(void 0),t=Object(R.a)(e,2),a=(t[0],t[1]),n=Object(c.useState)(void 0),r=Object(R.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(void 0),l=Object(R.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(void 0),b=Object(R.a)(j,2),p=b[0],h=b[1];return Object(c.useEffect)(Object(B.a)(z.a.mark((function e(){var t,n,c,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getUser();case 3:if(2===e.sent.role){e.next=8;break}window.location.replace(_.loginPath),e.next=19;break;case 8:return e.next=10,qe.getAllVacations();case 10:t=e.sent,a(t),n=[],c=[],r=[],t.forEach((function(e,t){c.push(+t+1),r.push(e.destination);var a={destination:e.destination,followers:+e.followers};n.push(a)})),o(n),d(c),h(r);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),[]),Object(C.jsx)("div",{className:"Reports",children:i&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:'"Vacations \ud83d\udc96 and Number of Followers \ud83d\ude0d"'}),Object(C.jsxs)(Rt.a,{domainPadding:20,children:[Object(C.jsx)(Ht.a,{tickValues:u,tickFormat:p}),Object(C.jsx)(Ht.a,{dependentAxis:!0,tickFormat:function(e){return"".concat(e)}}),Object(C.jsx)(zt.a,{horizontal:!0,data:i,x:"destination",y:"followers"})]})]})})};var $t=function(){var e=Object(c.useState)(!1),t=Object(R.a)(e,2),a=(t[0],t[1]),n=Object(c.useState)(!1),r=Object(R.a)(n,2),i=(r[0],r[1]);return Object(c.useEffect)((function(){Object(B.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=I.subscribe((function(){a(Q.isLoggedIn()),i(Q.isAdmin())})),e.abrupt("return",(function(){return t()}));case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[]),Object(C.jsxs)(pe.d,{children:[Object(C.jsx)(pe.b,{path:"/register",element:Object(C.jsx)(Ie,{})}),Object(C.jsx)(pe.b,{path:"/login",element:Object(C.jsx)(Me,{})}),Object(C.jsx)(pe.b,{path:"/logout",element:Object(C.jsx)(Ce,{})}),Object(C.jsx)(pe.b,{path:"/home",element:Object(C.jsx)(Bt,{})}),Object(C.jsx)(pe.b,{path:"/admin-panel",element:Object(C.jsx)(tt,{})}),Object(C.jsx)(pe.b,{path:"/reports",element:Object(C.jsx)(Wt,{})}),Object(C.jsx)(pe.b,{path:"/vacations/update/:id",element:Object(C.jsx)(at,{})}),Object(C.jsx)(pe.b,{path:"/vacations/new",element:Object(C.jsx)(nt,{})}),Object(C.jsx)(pe.b,{path:"/vacations/details/:id",element:Object(C.jsx)(rt,{})}),Object(C.jsx)(pe.b,{path:"/about",element:Object(C.jsx)(ke,{})}),Object(C.jsx)(pe.b,{path:"/",element:Object(C.jsx)(pe.a,{to:"/home"})}),Object(C.jsx)(pe.b,{path:"*",element:Object(C.jsx)(Ve,{})})]})};a(489);var Gt=function(){return Object(C.jsxs)("div",{className:"Layout",children:[Object(C.jsx)("header",{children:Object(C.jsx)(be,{})}),Object(C.jsx)("main",{children:Object(C.jsx)($t,{})}),Object(C.jsx)("footer",{children:Object(C.jsx)(N,{})})]})},Jt=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"createInterceptors",value:function(){$.a.interceptors.request.use((function(e){return I.getState().token&&(e.headers={authorization:"Bearer "+I.getState().token}),e}))}}]),e}()),_t=a(302),Kt=new(function(){function e(){Object(l.a)(this,e),this.socket=void 0}return Object(u.a)(e,[{key:"connect",value:function(){this.socket=Object(_t.a)(_.urls.socketServer),this.socket.on("admin-add-vacation",(function(e){var t;F.dispatch((t=e,{type:m.AddVacation,payload:t})),console.log(e)})),this.socket.on("user-update-followVacation",(function(e){F.dispatch(w(e))})),this.socket.on("admin-update-vacation",(function(e){F.dispatch(w(e))})),this.socket.on("admin-delete-vacation",(function(e){F.dispatch(y(e))})),this.socket.on("user-add-followVacation",(function(e){F.dispatch(w(e))})),this.socket.on("user-delete-followVacation",(function(e){F.dispatch(w(e))}))}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e}());Jt.createInterceptors(),Kt.connect(),o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(P.a,{children:Object(C.jsx)(Gt,{})})}),document.getElementById("root")),s()}},[[494,1,2]]]);
//# sourceMappingURL=main.c929e5fb.chunk.js.map